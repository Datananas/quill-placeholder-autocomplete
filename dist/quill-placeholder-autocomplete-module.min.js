!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.QuillPlaceholderAutocomplete=e():t.QuillPlaceholderAutocomplete=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(15),i=n(21);e.async=new i.AsyncScheduler(r.AsyncAction)},function(t,e,n){"use strict";(function(t){var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i=n||void 0!==t&&t||r;e.root=i,function(){if(!i)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(e,n(0))},function(t,e,n){"use strict";var r=n(17),i=n(18),o=n(4),s=n(19),u=n(5),c=n(20),a=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,a=this._parents,l=this._unsubscribe,f=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,d=a?a.length:0;n;)n.remove(this),n=++p<d&&a[p]||null;if(o.isFunction(l))s.tryCatch(l).call(this)===u.errorObject&&(e=!0,t=t||(u.errorObject.e instanceof c.UnsubscriptionError?h(u.errorObject.e.errors):[u.errorObject.e]));if(r.isArray(f))for(p=-1,d=f.length;++p<d;){var y=f[p];if(i.isObject(y))if(s.tryCatch(y.unsubscribe).call(y)===u.errorObject){e=!0,t=t||[];var b=u.errorObject.e;b instanceof c.UnsubscriptionError?t=t.concat(h(b.errors)):t.push(b)}}if(e)throw new c.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function h(t){return t.reduce(function(t,e){return t.concat(e instanceof c.UnsubscriptionError?e.errors:e)},[])}e.Subscription=a},function(t,e,n){"use strict";e.isFunction=function(t){return"function"==typeof t}},function(t,e,n){"use strict";e.errorObject={e:{}}},function(t,e,n){n(7),t.exports=n(8)},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=a(n(9)),s=a(n(11)),u=n(12),c=a(n(13));n(14);function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){var e=t.import("delta");return t.register("formats/suggest",(0,c.default)(t)),function(){function n(t,e){var r=this,i=e.onOpen,o=e.onClose,c=e.getPlaceholders,a=e.fetchPlaceholders,h=e.onFetchStarted,l=e.onFetchFinished,f=e.container,p=e.debounceTime,d=void 0===p?0:p;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var y=this.update.bind(this);this.quill=t,this.onClose=o,this.onOpen=i,this.onFetchStarted=h,this.onFetchFinished=l,this.getPlaceholders=c,this.fetchPlaceholders=a,"string"==typeof f?this.container=this.quill.container.parentNode.querySelector(f):void 0===f?(this.container=(0,u.h)("ul",{}),this.quill.container.parentNode.appendChild(this.container)):this.container=f,this.container.classList.add("ql-autocomplete-menu","completions"),this.container.style.position="absolute",this.container.style.display="none",this.onSelectionChange=this.maybeUnfocus.bind(this),this.onTextChange=d?(0,s.default)(y,d):y,this.open=!1,this.quill.suggestsDialogOpen=!1,this.hashIndex=null,this.focusedButton=null,this.buttons=[],this.matchedPlaceholders=[],this.toolbarHeight=0,this.suggestKeydownHandler=function(t){"Enter"===t.key&&this.handleEnterTab()}.bind(this),t.root.addEventListener("keydown",function(t){t.defaultPrevented||"#"===t.key&&(r.toolbarHeight||(r.toolbarHeight=r.quill.getModule("toolbar").container.offsetHeight),r.onHashKey(r.quill.getSelection()),t.preventDefault())},!0),t.keyboard.addBinding({key:40,collapsed:!0,format:["suggest"]},this.handleArrow.bind(this)),t.keyboard.addBinding({key:27,collapsed:null,format:["suggest"]},this.handleEscape.bind(this)),t.suggestHandler=this.onHashKey.bind(this)}return i(n,[{key:"onHashKey",value:function(e){if(this.open)return!0;e.length>0&&this.quill.deleteText(e.index,e.length,t.sources.USER),this.quill.insertText(e.index,"#","suggest","@@placeholder",t.sources.USER);var n=this.quill.getBounds(e.index),r=this.toolbarHeight+2;this.quill.setSelection(e.index+1,t.sources.SILENT),this.hashIndex=e.index,this.container.style.left=n.left+"px",this.container.style.top=n.top+n.height+r+"px",this.open=!0,this.quill.suggestsDialogOpen=!0,this.quill.on("text-change",this.onTextChange),this.quill.once("selection-change",this.onSelectionChange),this.quill.root.addEventListener("keydown",this.suggestKeydownHandler),this.update(),this.onOpen&&this.onOpen()}},{key:"handleArrow",value:function(){if(!this.open)return!0;this.buttons[0].focus()}},{key:"handleEnterTab",value:function(){if(!this.open)return!0;this.close(this.matchedPlaceholders[0])}},{key:"handleEscape",value:function(){if(!this.open)return!0;this.close()}},{key:"emptyCompletionsContainer",value:function(){for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild)}},{key:"update",value:function(){var t=this.quill.getSelection().index,e=this.getPlaceholders(),n=e.map(function(t){return t.label.toLowerCase()}),r=(0,o.default)(n,!1);if(this.hashIndex>=t)return this.close(null);this.originalQuery=this.quill.getText(this.hashIndex+1,t-this.hashIndex-1),this.query=this.originalQuery.toLowerCase(),this.query.length&&this.fetchPlaceholders&&this.query.length>4&&this.handleAsyncFetching(e,n,r).then(this.handleUpdateEnd.bind(this)),this.handleUpdateEnd({placeholders:e,labels:n,fs:r})}},{key:"handleUpdateEnd",value:function(t){var e=t.placeholders,n=t.labels,i=t.fs.get(this.query);i=i?i.map(function(t){return r(t,2)[1]}):n,this.matchedPlaceholders=e.filter(function(t){var e=t.label;return-1!==i.indexOf(e)}),this.renderCompletions(this.matchedPlaceholders)}},{key:"handleAsyncFetching",value:function(t,e,n){var r=this;return this.onFetchStarted&&this.onFetchStarted(this.query),this.fetchPlaceholders(this.query).then(function(i){return r.onFetchFinished&&r.onFetchFinished(i),i&&i.length&&i.forEach(function(r){-1===e.indexOf(r.label)&&(n.add(r.label),t.push(r),e.push(r.label))}),{placeholders:t,labels:e,fs:n}})}},{key:"maybeUnfocus",value:function(){this.container.querySelector("*:focus")||this.close(null)}},{key:"renderCompletions",value:function(t){var e=this;this.emptyCompletionsContainer();var n=Array(t.length);this.buttons=n;var r=new RegExp("^(.*)("+this.query+")(.*)$");t.forEach(function(t,i){var o=t.label,s=(o.match(r)||[null,o]).slice(1).map(function(t,e){return t.length?(0,u.h)("span",{className:1===e?"matched":"unmatched"},(0===e?"#":"")+t):null}).filter(function(t){return t}),c=(0,u.h)("li",{},u.h.apply(void 0,["button",{type:"button"}].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(s))));e.container.appendChild(c),n[i]=c.firstChild,n[i].addEventListener("keydown",function(t,r){return function(i){"ArrowDown"===i.key||40===i.keyCode?(i.preventDefault(),n[Math.min(n.length-1,t+1)].focus()):"ArrowUp"===i.key||38===i.keyCode?(i.preventDefault(),n[Math.max(0,t-1)].focus()):"Enter"===i.key||13===i.keyCode||" "===i.key||32===i.keyCode||"Tab"===i.key||9===i.keyCode?(i.preventDefault(),e.close(r)):"Escape"!==i.key&&27!==i.keyCode||(i.preventDefault(),e.close())}}(i,t)),n[i].addEventListener("mousedown",function(){return e.close(t)}),n[i].addEventListener("focus",function(){return e.focusedButton=i}),n[i].addEventListener("unfocus",function(){return e.focusedButton=null})}),this.container.style.display="block"}},{key:"close",value:function(n){this.container.style.display="none",this.emptyCompletionsContainer(),this.quill.off("selection-change",this.onSelectionChange),this.quill.off("text-change",this.onTextChange),this.quill.root.removeEventListener("keydown",this.suggestKeydownHandler);var r=(new e).retain(this.hashIndex).delete(this.query.length+1);this.quill.updateContents(r,t.sources.USER),n&&(this.quill.insertEmbed(this.hashIndex,"placeholder",n,t.sources.USER),this.quill.setSelection(this.hashIndex+1,0,t.sources.SILENT)),this.quill.focus(),this.open=!1,this.quill.suggestsDialogOpen=!1,this.onClose&&this.onClose(n||null)}}]),n}()}},function(t,e,n){t.exports=n(10)},function(t,e){!function(){var e=function(t,e,n,r){var i={};t=t||[],i.gramSizeLower=n||2,i.gramSizeUpper=r||3,i.useLevenshtein="boolean"!=typeof e||e,i.exactSet={},i.matchDict={},i.items={};var o=function(t,e){if(null===t&&null===e)throw"Trying to compare two null values";if(null===t||null===e)return 0;var n=function(t,e){for(var n,r,i=[],o=0;o<=e.length;o++)for(var s=0;s<=t.length;s++)r=o&&s?t.charAt(s-1)===e.charAt(o-1)?n:Math.min(i[s],i[s-1],n)+1:o+s,n=i[s],i[s]=r;return i.pop()}(t=String(t),e=String(e));return t.length>e.length?1-n/t.length:1-n/e.length},s=/[^a-zA-Z0-9\u00C0-\u00FF, ]+/g,u=function(t,e){for(var n={},r=function(t,e){e=e||2;var n="-"+t.toLowerCase().replace(s,"")+"-",r=e-n.length,i=[];if(r>0)for(var o=0;o<r;++o)t+="-";for(o=0;o<n.length-e+1;++o)i.push(n.slice(o,o+e));return i}(t,e=e||2),i=0;i<r.length;++i)r[i]in n?n[r[i]]+=1:n[r[i]]=1;return n};i.get=function(t,e,n){void 0===n&&(n=.33);var r=this._get(t,n);return r||void 0===e?r:e},i._get=function(t,e){var n=this._normalizeStr(t),r=this.exactSet[n];if(r)return[[1,r]];for(var i=[],o=this.gramSizeUpper;o>=this.gramSizeLower;--o)if((i=this.__get(t,o,e))&&i.length>0)return i;return null},i.__get=function(t,e,n){var r,i,s,c,a=this._normalizeStr(t),h={},l=u(a,e),f=this.items[e],p=0;for(r in l)if(i=l[r],p+=Math.pow(i,2),r in this.matchDict)for(w=0;w<this.matchDict[r].length;++w)s=this.matchDict[r][w][0],c=this.matchDict[r][w][1],s in h?h[s]+=i*c:h[s]=i*c;if(function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(h))return null;var d,y=Math.sqrt(p),b=[];for(var v in h)d=h[v],b.push([d/(y*f[v][0]),f[v][1]]);var g=function(t,e){return t[0]<e[0]?1:t[0]>e[0]?-1:0};if(b.sort(g),this.useLevenshtein){for(var m=[],_=Math.min(50,b.length),w=0;w<_;++w)m.push([o(b[w][1],a),b[w][1]]);(b=m).sort(g)}m=[];return b.forEach(function(t){t[0]>=n&&m.push([t[0],this.exactSet[t[1]]])}.bind(this)),m},i.add=function(t){if(this._normalizeStr(t)in this.exactSet)return!1;for(var e=this.gramSizeLower;e<this.gramSizeUpper+1;++e)this._add(t,e)},i._add=function(t,e){var n=this._normalizeStr(t),r=this.items[e]||[],i=r.length;r.push(0);var o,s,c=u(n,e),a=0;for(o in c)s=c[o],a+=Math.pow(s,2),o in this.matchDict?this.matchDict[o].push([i,s]):this.matchDict[o]=[[i,s]];var h=Math.sqrt(a);r[i]=[h,n],this.items[e]=r,this.exactSet[n]=t},i._normalizeStr=function(t){if("[object String]"!==Object.prototype.toString.call(t))throw"Must use a string as argument to FuzzySet functions";return t.toLowerCase()},i.length=function(){var t,e=0;for(t in this.exactSet)this.exactSet.hasOwnProperty(t)&&(e+=1);return e},i.isEmpty=function(){for(var t in this.exactSet)if(this.exactSet.hasOwnProperty(t))return!1;return!0},i.values=function(){var t,e=[];for(t in this.exactSet)this.exactSet.hasOwnProperty(t)&&e.push(this.exactSet[t]);return e};for(var c=i.gramSizeLower;c<i.gramSizeUpper+1;++c)i.items[c]=[];for(c=0;c<t.length;++c)i.add(t[c]);return i};void 0!==t&&t.exports?(t.exports=e,this.FuzzySet=e):this.FuzzySet=e}()},function(t,e,n){(function(e){var n="Expected a function",r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,a=parseInt,h="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,f=h||l||Function("return this")(),p=Object.prototype.toString,d=Math.max,y=Math.min,b=function(){return f.Date.now()};function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==i}(t))return r;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=u.test(t);return n||c.test(t)?a(t.slice(2),n?2:8):s.test(t)?r:+t}t.exports=function(t,e,r){var i,o,s,u,c,a,h=0,l=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError(n);function m(e){var n=i,r=o;return i=o=void 0,h=e,u=t.apply(r,n)}function _(t){var n=t-a;return void 0===a||n>=e||n<0||f&&t-h>=s}function w(){var t=b();if(_(t))return x(t);c=setTimeout(w,function(t){var n=e-(t-a);return f?y(n,s-(t-h)):n}(t))}function x(t){return c=void 0,p&&i?m(t):(i=o=void 0,u)}function S(){var t=b(),n=_(t);if(i=arguments,o=this,a=t,n){if(void 0===c)return function(t){return h=t,c=setTimeout(w,e),l?m(t):u}(a);if(f)return c=setTimeout(w,e),m(a)}return void 0===c&&(c=setTimeout(w,e)),u}return e=g(e)||0,v(r)&&(l=!!r.leading,s=(f="maxWait"in r)?d(g(r.maxWait)||0,e):s,p="trailing"in r?!!r.trailing:p),S.cancel=function(){void 0!==c&&clearTimeout(c),h=0,i=a=o=c=void 0},S.flush=function(){return void 0===c?u:x(b())},S}}).call(e,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.h=function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=document.createElement(t);return Object.keys(e).forEach(function(t){return o[t]=e[t]}),r.forEach(function(t){"string"==typeof t&&(t=document.createTextNode(t)),o.appendChild(t)}),o}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0};e.default=function(t){var e=t.import("blots/inline"),n=function(t){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),r(n,[{key:"format",value:function(t,e){"suggest"===t&&e?this.domNode.setAttribute("data-id",e):i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"format",this).call(this,t,e)}},{key:"formats",value:function(){var t=i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"formats",this).call(this);return t.suggest=n.formats(this.domNode),t}}],[{key:"create",value:function(t){var e=i(n.__proto__||Object.getPrototypeOf(n),"create",this).call(this);return e.dataset.id=t,e}},{key:"formats",value:function(t){return t.dataset.id}}]),n}();return n.blotName="suggest",n.tagName="SPAN",n.className="suggest",n}},function(t,e,n){"use strict";var r=n(1),i=n(23);e.debounceTime=function(t,e){return void 0===e&&(e=r.async),i.debounceTime(t,e)(this)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(2),o=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n,this.pending=!1}return r(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),i.root.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;i.root.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(n(16).Action);e.AsyncAction=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(e,n){t.call(this)}return r(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(3).Subscription);e.Action=i},function(t,e,n){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,n){"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";var r,i=n(5);function o(){try{return r.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}e.tryCatch=function(t){return r=t,o}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return r(e,t),e}(Error);e.UnsubscriptionError=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(n(22).Scheduler);e.AsyncScheduler=i},function(t,e,n){"use strict";var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();e.Scheduler=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(24),o=n(1);e.debounceTime=function(t,e){return void 0===e&&(e=o.async),function(n){return n.lift(new s(t,e))}};var s=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.dueTime,this.scheduler))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.dueTime=n,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return r(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(c,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(i.Subscriber);function c(t){t.debouncedNext()}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(4),o=n(3),s=n(25),u=n(26),c=function(t){function e(e,n,r){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!e){this.destination=s.empty;break}if("object"==typeof e){if(h(e)){var i=e[u.rxSubscriber]();this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)}else this.syncErrorThrowable=!0,this.destination=new a(this,e);break}default:this.syncErrorThrowable=!0,this.destination=new a(this,e,n,r)}}return r(e,t),e.prototype[u.rxSubscriber]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(o.Subscription);e.Subscriber=c;var a=function(t){function e(e,n,r,o){var u;t.call(this),this._parentSubscriber=e;var c=this;i.isFunction(n)?u=n:n&&(u=n.next,r=n.error,o=n.complete,n!==s.empty&&(c=Object.create(n),i.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=u,this._error=r,this._complete=o}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c);function h(t){return t instanceof c||"syncErrorThrowable"in t&&t[u.rxSubscriber]}},function(t,e,n){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,n){"use strict";var r=n(2).root.Symbol;e.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber}]).default});